openapi: 3.1.0
info:
  title: TalkToMePy Service
  description: A local TTS service scaffold for future Qwen-3 integration.
  version: 0.1.0
paths:
  /health:
    get:
      tags:
      - system
      summary: Health
      operationId: health_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
  /version:
    get:
      tags:
      - system
      summary: Version
      operationId: version_version_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VersionResponse'
  /adapters:
    get:
      tags:
      - adapters
      summary: Adapters
      operationId: adapters_adapters_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdaptersResponse'
  /adapters/{adapter_id}/status:
    get:
      tags:
      - adapters
      summary: Adapter Status
      operationId: adapter_status_adapters__adapter_id__status_get
      parameters:
      - name: adapter_id
        in: path
        required: true
        schema:
          type: string
          title: Adapter Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdapterStatusResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /model/status:
    get:
      tags:
      - system
      summary: Model Status
      operationId: model_status_model_status_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelStatusResponse'
  /model/load:
    post:
      tags:
      - system
      summary: Model Load
      operationId: model_load_model_load_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelStatusResponse'
        '202':
          description: Model loading has started and is still in progress.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelStatusResponse'
  /model/unload:
    post:
      tags:
      - system
      summary: Model Unload
      operationId: model_unload_model_unload_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelStatusResponse'
  /synthesize:
    post:
      tags:
      - tts
      summary: Synthesize
      operationId: synthesize_synthesize_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SynthesizeRequest'
        required: true
      responses:
        '200':
          description: Generated WAV audio bytes.
          content:
            audio/wav:
              schema:
                type: string
                format: binary
        '400':
          description: Bad request (unsupported format).
        '503':
          description: Model is loading or runtime dependency unavailable.
        '500':
          description: Model load/synthesis failure.
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /synthesize/stream:
    post:
      tags:
      - tts
      summary: Synthesize Stream
      operationId: synthesize_stream_synthesize_stream_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SynthesizeRequest'
        required: true
      responses:
        '200':
          description: Generated WAV audio stream.
          content:
            audio/wav:
              schema:
                type: string
                format: binary
        '400':
          description: Bad request (unsupported format).
        '503':
          description: Model is loading or runtime dependency unavailable.
        '500':
          description: Model load/synthesis failure.
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
components:
  schemas:
    AdapterInfo:
      properties:
        id:
          type: string
          title: Id
        name:
          type: string
          title: Name
        status_path:
          type: string
          title: Status Path
      type: object
      required:
      - id
      - name
      - status_path
      title: AdapterInfo
    AdapterStatusResponse:
      properties:
        adapter_id:
          type: string
          title: Adapter Id
        model_id:
          type: string
          title: Model Id
        loaded:
          type: boolean
          title: Loaded
        loading:
          type: boolean
          title: Loading
        sox_available:
          type: boolean
          title: Sox Available
        qwen_tts_available:
          type: boolean
          title: Qwen Tts Available
        load_error:
          anyOf:
          - type: string
          - type: 'null'
          title: Load Error
        seconds_since_last_use:
          anyOf:
          - type: number
          - type: 'null'
          title: Seconds Since Last Use
        idle_unload_seconds:
          type: integer
          title: Idle Unload Seconds
        auto_unload_enabled:
          type: boolean
          title: Auto Unload Enabled
        ready:
          type: boolean
          title: Ready
        detail:
          type: string
          title: Detail
      type: object
      required:
      - adapter_id
      - model_id
      - loaded
      - loading
      - sox_available
      - qwen_tts_available
      - load_error
      - seconds_since_last_use
      - idle_unload_seconds
      - auto_unload_enabled
      - ready
      - detail
      title: AdapterStatusResponse
    AdaptersResponse:
      properties:
        adapters:
          items:
            $ref: '#/components/schemas/AdapterInfo'
          type: array
          title: Adapters
      type: object
      required:
      - adapters
      title: AdaptersResponse
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    HealthResponse:
      properties:
        status:
          type: string
          title: Status
          default: ok
        service:
          type: string
          title: Service
          default: talktomepy
      type: object
      title: HealthResponse
    ModelStatusResponse:
      properties:
        model_id:
          type: string
          title: Model Id
        loaded:
          type: boolean
          title: Loaded
        loading:
          type: boolean
          title: Loading
        sox_available:
          type: boolean
          title: Sox Available
        qwen_tts_available:
          type: boolean
          title: Qwen Tts Available
        load_error:
          anyOf:
          - type: string
          - type: 'null'
          title: Load Error
        seconds_since_last_use:
          anyOf:
          - type: number
          - type: 'null'
          title: Seconds Since Last Use
        idle_unload_seconds:
          type: integer
          title: Idle Unload Seconds
        auto_unload_enabled:
          type: boolean
          title: Auto Unload Enabled
        ready:
          type: boolean
          title: Ready
        detail:
          type: string
          title: Detail
      type: object
      required:
      - model_id
      - loaded
      - loading
      - sox_available
      - qwen_tts_available
      - load_error
      - seconds_since_last_use
      - idle_unload_seconds
      - auto_unload_enabled
      - ready
      - detail
      title: ModelStatusResponse
    SynthesizeRequest:
      properties:
        text:
          type: string
          maxLength: 2000
          minLength: 1
          title: Text
        instruct:
          type: string
          title: Instruct
          default: A warm and clear speaking voice with natural pacing.
        language:
          type: string
          title: Language
          default: English
        format:
          type: string
          title: Format
          default: wav
      type: object
      required:
      - text
      title: SynthesizeRequest
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
        input:
          title: Input
        ctx:
          type: object
          title: Context
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
    VersionResponse:
      properties:
        service:
          type: string
          title: Service
        api_version:
          type: string
          title: Api Version
        openapi_version:
          type: string
          title: Openapi Version
      type: object
      required:
      - service
      - api_version
      - openapi_version
      title: VersionResponse
